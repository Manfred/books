#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../config/environment'
require 'logger'

logger = Logger.new($stdout)
logger.level = Logger::DEBUG

reynard =
  Reynard
  .new(filename: './openapi/specification.yml')
  .logger(logger)

response =
  reynard
  .operation('listBooks')
  .execute

if response.success?
  puts 'BOOKS'
  response.object.each do |book|
    puts "* #{book.name}"
  end
else
  warn "ðŸ”¥ #{response.code}"
  warn response.parsed_body.inspect
end
